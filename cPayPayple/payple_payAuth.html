<!-- 가맹점 인증을 진행하는 페이지이며, PAYPLE 서버에서 호출하는 페이지 입니다.
기본 PHP 로 적용되어 있으며, 가맹점 환경에 맞는 개발언어로 수정해주세요. -->
<?php
header("Expires: Mon 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d, M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0; pre-check=0", false);
header("Pragma: no-cache");
header("Content-type: application/json; charset=utf-8");


$url = "https://testcpay.payple.kr/php/auth.php";   // TEST

//발급받은 비밀키. 유출에 주의하시기 바랍니다.
$post_data = array (
    "cst_id" => "test",
    "custKey" => "abcd1234567890"
);


$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);

if ($REMOTE_ADDR != '127.0.0.1') {
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSLVERSION, 3);
}

curl_setopt($ch, CURLOPT_REFERER, $SERVER_NAME);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);

ob_start();
$res = curl_exec($ch);
$buffer = ob_get_contents();
ob_end_clean();

if (!$buffer) {
    $returnVal = "";
} else {
    echo $buffer;
}
?>
